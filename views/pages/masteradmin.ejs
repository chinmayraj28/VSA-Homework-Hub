<%- include('../common/head')%>
<body data-bs-theme="dark" style="font-family: 'Poppins', sans-serif;">
    <header>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <%- include('../common/navbar', {classes: classArray})%>
    </header>
    <main>
        <div class="container">
            <h1 class="mt-4">Admin Dashboard</h1>
            
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            Users with Access
                        </div>
                        <div class="card-body">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Role</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% authorizedUsers.forEach(function(user) { %>
                                        <tr>
                                            <td><%= user.username %></td>
                                            <td><%= user.role %></td>
                                            <td>
                                                <button class="btn btn-danger delete-user" data-user-username="<%= user.username %>">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    <% }) %>
                                    
                                </tbody>
                            </table>
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
                                Add User
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            Add Assignment
                        </div>
                        <div class="card-body">
                            <form id="homework-form">
                                <select class="form-select" id="class" aria-label="Default select example">
                                    <option selected>Class:</option>
                                    <option value="AS-B">AS - B</option>
                                </select>
                                <br>
                                <select class="form-select" id="subject" aria-label="Default select example">
                                    <option selected>Subject:</option>
                                    <option value="Chemistry">Chemistry</option>
                                    <option value="Physics">Physics</option>
                                    <option value="Biology">Biology</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="English">English</option>
                                    <option value="Computer-Science">Computer Science</option>
                                    <option value="Economics">Economics</option>
                                </select>
                                <br>
                                <label for="assignment-h" class="form-label">Assignment Heading:</label>
                                <input type="text" class="form-control" id="assignment-h" name="assignment-h" required>
                                <label for="assignment-d" class="form-label">Assignment Details:</label>
                                <input type="text" class="form-control" id="assignment-d" name="assignment-d" required>
                                <label for="assignment-date" class="form-label">Assignment Due Date:</label>
                                <input type="date" class="form-control" id="assignment-date" name="assignment-date" required>
                                <br>
                                <button type="submit" class="btn btn-primary">Add</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addUserModalLabel">Add User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="add-user-form">
                        <label for="new-username" class="form-label">Username:</label>
                        <input type="text" class="form-control" id="new-username" name="new-username" required>
                        <label for="new-password" class="form-label">Password:</label>
                        <input type="text" class="form-control" id="new-password" name="new-password" required>
                        <label for="new-role" class="form-label">Role:</label>
                        <input type="number" class="form-control" id="new-role" name="new-role" required>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="add-user-button">Add User</button>
                </div>
            </div>
        </div>
    </div>
    <footer>
        <%- include('../common/footer')%>
    </footer>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="../js/addAssignment.js"></script>
    <script src="../js/addUser.js"></script>
    <script src="../js/deleteUser.js"></script>
</body>
